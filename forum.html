<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fórum Inteligente</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white min-h-screen">
  <header class="flex items-center justify-between px-6 py-4 bg-gray-800 shadow">
    <div class="text-xl font-semibold">🧠 Fórum Inteligente</div>
    <nav class="space-x-4">
      <button class="hover:underline">🔍 Buscar</button>
      <button class="hover:underline">📋 Publicações</button>
      <button id="newPostBtn" class="hover:underline">➕ Novo Post</button>
    </nav>
  </header>

  <main class="p-6 max-w-4xl mx-auto">
    <!-- Seção de busca -->
    <section class="mb-8 text-center">
      <h1 class="text-3xl font-bold mb-2">🔎 Busca Inteligente</h1>
      <p class="text-sm text-gray-400 mb-4">Procure por conteúdo relacionado. A IA sugerirá tópicos semelhantes.</p>
      <input type="text" placeholder="Digite sua dúvida ou tópico..." class="w-full p-3 rounded bg-gray-800 border border-gray-700 text-white" />
      <div class="mt-4 flex justify-center gap-4">
        <select class="bg-gray-800 border border-gray-600 rounded p-2">
          <option>5 resultados</option>
          <option>10 resultados</option>
        </select>
        <button class="bg-purple-600 px-4 py-2 rounded hover:bg-purple-700">Buscar</button>
      </div>
    </section>

    <!-- Lista de posts -->
    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-4">📋 Publicações Recentes</h2>
      <div class="space-y-4">
        <!-- Exemplo de post -->
        <div class="bg-gray-800 p-4 rounded shadow border border-gray-700">
          <h3 class="text-xl font-bold">Como integrar IA em um fórum?</h3>
          <p class="text-sm text-gray-400">Publicado por Ana Dev • Tags: #IA #fórum #busca</p>
          <p class="mt-2">Gostaria de sugestões para incorporar respostas inteligentes em meu sistema de perguntas e respostas...</p>
          <button class="mt-2 text-sm text-purple-400 hover:underline">Ver mais</button>
        </div>
      </div>
    </section>

    <!-- Novo post -->
    <section id="newPostForm" class="hidden bg-gray-800 p-6 rounded shadow border border-gray-700">
      <h2 class="text-2xl font-semibold mb-4">➕ Novo Post</h2>
      <input type="text" placeholder="Título do post" class="w-full p-3 mb-3 rounded bg-gray-900 border border-gray-600" />
      <input type="text" placeholder="Tags separadas por vírgula" class="w-full p-3 mb-3 rounded bg-gray-900 border border-gray-600" />
      <textarea rows="4" placeholder="Descrição / Pergunta..." class="w-full p-3 mb-3 rounded bg-gray-900 border border-gray-600"></textarea>
      <button class="bg-green-600 px-4 py-2 rounded hover:bg-green-700">Publicar</button>
    </section>
  </main>

 <script>
  const postsURL = 'https://clubfullstack.github.io/Space/forum.html/download';
  let postsData = [];

  // Carrega os posts do JSON externo e do localStorage
  async function loadPosts() {
    try {
      const response = await fetch(postsURL);
      const json = await response.json();

      const localData = JSON.parse(localStorage.getItem("forum_posts")) || [];
      postsData = [...json, ...localData];

      renderPosts(postsData);
    } catch (error) {
      console.error("Erro ao carregar posts:", error);
    }
  }

  // Renderiza os posts na tela
  function renderPosts(data) {
    const container = document.getElementById("postsContainer");
    container.innerHTML = "";

    data.forEach(post => {
      const postCard = `
        <div class="bg-gray-800 rounded-xl p-4 mb-4 text-white shadow-md">
          <h3 class="text-xl font-semibold">${post.title}</h3>
          <p class="text-sm text-gray-400">por ${post.author}</p>
          <p class="mt-2">${post.content}</p>
          <div class="mt-2 text-sm text-purple-300">Tags: ${post.tags.join(', ')}</div>
        </div>
      `;
      container.innerHTML += postCard;
    });
  }

  // Salva novo post no localStorage
  function savePost(e) {
    e.preventDefault();

    const title = document.getElementById("postTitle").value;
    const author = document.getElementById("postAuthor").value;
    const tags = document.getElementById("postTags").value.split(',').map(tag => tag.trim());
    const content = document.getElementById("postContent").value;

    const newPost = {
      id: Date.now(),
      title,
      author,
      tags,
      content
    };

    const existing = JSON.parse(localStorage.getItem("forum_posts")) || [];
    existing.push(newPost);
    localStorage.setItem("forum_posts", JSON.stringify(existing));

    document.getElementById("newPostForm").reset();
    loadPosts(); // Atualiza a lista
  }

  document.addEventListener("DOMContentLoaded", () => {
    loadPosts();
    document.getElementById("newPostForm").addEventListener("submit", savePost);
  });
</script>

</body>
</html>
